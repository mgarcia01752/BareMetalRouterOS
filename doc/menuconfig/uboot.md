# U-Boot Customization

This guide explains how to access U-Boot Menuconfig and save the resulting `.config` file to the `meta-bare-metal-router` layer, specifically in the `recipes-bsp/u-boot/files` directory.

## Start MenuConfig

To start U-Boot Menuconfig, use the following command:

```bash
./menuconfig.sh --u-boot
```

## U-Boot MenuConfig Navigation

Navigating the `menuconfig` screen involves using the arrow keys, Enter, and Esc. Here are the basic steps for navigating and configuring U-Boot:

1. **Boot Options**
   - Navigate to: `Top Level Menu -> Boot options`
   - Configure boot delays, autoboot commands, and other boot-related options.

2. **Device Drivers**
   - Navigate to: `Top Level Menu -> Device Drivers`
   - Enable and configure various device drivers required for your hardware platform, such as Ethernet, USB, and MMC.

3. **Network Support**
   - Navigate to: `Top Level Menu -> Network support`
   - Configure network settings, including IP addresses, DHCP, and network protocols.

4. **Console and Terminal Settings**
   - Navigate to: `Top Level Menu -> Console configuration`
   - Set up console parameters such as baud rate, UART ports, and console devices.

5. **Environment Settings**
   - Navigate to: `Top Level Menu -> Environment settings`
   - Manage environment variables, storage locations for environment data, and default environment settings.

6. **Security Settings**
   - Navigate to: `Top Level Menu -> Security settings`
   - Enable security features such as secure boot, encryption, and authentication mechanisms.

7. **General Setup**
   - Navigate to: `Top Level Menu -> General setup`
   - General system configurations such as default memory addresses and hardware timers.

## U-Boot Configuration File

Once you have configured U-Boot, the `menuconfig.sh --u-boot` script will save a copy of the `.config` file to `recipes-bsp/u-boot/files/.config`.

### Script References

1. **[menuconfig.sh](../../menuconfig.sh)**
   - This script is used to launch the U-Boot `menuconfig`.

2. **[Location of new U-Boot .config](../../meta-bare-metal-router/recipes-bsp/u-boot/files)**
   - The `.config` file generated by the `menuconfig` is saved in the `meta-bare-metal-router/recipes-bsp/u-boot/files` directory.

## Additional Tips

- **Save Configuration**: After making changes in Menuconfig, make sure to save your new U-Boot configuration. You can save it to the default `.config` file or specify a different filename.
- **Build U-Boot**: Once the configuration is saved, build U-Boot using your build system (e.g., `bitbake` for Yocto). Make sure to deploy the new U-Boot binary to your target device.
- **Documentation**: Refer to the [U-Boot Documentation](https://www.denx.de/wiki/U-Boot) for detailed instructions and advanced configurations.

By following these steps, you can customize U-Boot to support your specific hardware, ensuring optimal performance and compatibility for your embedded system.